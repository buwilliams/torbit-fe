<div class="row ng-scope">
  <div class="col-lg-12">
    <h1 class="page-header">
      User <small>Management</small>
    </h1>
    <ol class="breadcrumb">
      <li class="active">
      <i class="fa fa-user"></i> Users</li>
    </ol>
  </div>
</div>
<div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title"><i class="fa fa-user fa-fw"></i> Users</h3>
  </div>
  <div class="panel-body">
    <div class="grid-options">
      <button ng-click="createMode = true;" class="btn btn-default">
        <i class="fa fa-plus-circle"></i> New</button>
      <button ng-click="refresh()" class="btn btn-default">
        <i class="fa fa-refresh"></i> Refresh</button>
    </div>
    <div class="table-responsive">
      <table class="table table-bordered table-hover table-striped">
        <thead>
          <tr>
            <th>Email<span class="text-danger">*</span></th>
            <th>Password<span class="text-danger">*</span></th>
            <th>Name</th>
            <th>Is Administrator?</th>
            <th>Created On</th>
            <th align="center">Options</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-show="createMode" ng-form="createUserForm">
            <td>
              <span ng-class="{'has-error': createUserForm.createEmail.$invalid}">
                <input class="form-control" type="email" name="createEmail"
                  ng-model="newUser.email" required="">
                <label ng-show="createUserForm.createEmail.$error.required"
                  class="control-label" for="createEmail">Required</label>
                <label ng-show="createUserForm.createEmail.$error.email"
                  class="control-label" for="createEmail">This is not a valid email.</label>
              </span>
            </td>
            <td>
              <span ng-class="{'has-error': createUserForm.createPassword.$error.required}">
                <input class="form-control" ng-model="newUser.password"
                  name="createPassword" type="password" required="">
                <label ng-show="createUserForm.createPassword.$error.required"
                  class="control-label" for="createEmail">Required</label>
              </span>
            </td>
            <td>
              <span><input class="form-control" ng-model="newUser.name" /></span>
            </td>
            <td>
              <select class="form-control" ng-model="newUser.admin"
                ng-options="boolToStr(item) for item in [true, false]">
              </select>
            </td>
            <td>&nbsp;</td>
            <td align="center">
              <a href="javascript:void(0);"
                class="align-middle space-right"
                ng-click="save(createMode, createUserForm, newUser);">
                <i class="fa fa-floppy-o"></i> Save
              </a>
              <a href="javascript:void(0);"
                class="align-middle space-right"
                ng-click="cancelNewUser(); createMode = false">
                <i class="fa fa-ban"></i> Cancel
              </a>
            </td>
          </tr>
          <tr ng-repeat="user in users" ng-form="editUserForm">
            <td>
              <span ng-hide="editMode">{{ user.email }}</span>
              <span class="align-middle" ng-show="editMode">{{ user.email }}</span>
            </td>
            <td>
              <span ng-hide="editMode">[hidden]</span>
              <span ng-show="editMode"
                ng-class="{'has-error': editUserForm.editPassword.$error.required}">
                <input name="editPassword" class="form-control"
                  ng-model="user.password" type="password" required="">
                <label ng-show="editUserForm.editPassword.$error.required"
                  class="control-label" for="editPassword">Required</label>
              </span>
            </td>
            <td>
              <span ng-hide="editMode">{{ user.name }}</span>
              <span ng-show="editMode">
                <input class="form-control" ng-model="user.name" />
              </span>
            </td>
            <td>
              <span ng-hide="editMode">{{ user.admin }}</span>
              <select class="form-control" ng-show="editMode" ng-model="user.admin"
                ng-options="boolToStr(item) for item in [true, false]">
              </select>
            </td>
            <td>
              <span ng-hide="editMode">{{ user.created }}</span>
              <span class="align-middle" ng-show="editMode">{{ user.created }}</span>
            </td>
            <td align="center">
              <a ng-hide="editMode"
                class="space-right"
                href="javascript:void(0);"
                ng-click="editMode = true">
                <i class="fa fa-pencil"></i> Edit
              </a>
              <a ng-hide="editMode"
                class="space-right"
                href="javascript:void(0);"
                ng-click="delete(user);">
                <i class="fa fa-trash-o"></i> Delete
              </a>
              <a ng-show="editMode"
                class="space-right align-middle"
                href="javascript:void(0);" ng-click="save(editMode, editUserForm, user);">
                <i class="fa fa-floppy-o"></i> Save
              </a>
              <a ng-show="editMode"
                class="space-right align-middle"
                href="javascript:void(0);"
                ng-click="cancel(user); editMode = false">
                <i class="fa fa-ban"></i> Cancel
              </a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
